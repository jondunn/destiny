{% extends "dashboard/_base.html" %}
{% block title %}{{username}}{% endblock %}
{% block content %}

<div class="container">
  <table class="table">
    <tbody>
      {% for bucket_name, bucket in buckets.iteritems()|sort %}
        <tr>
          <th>{{bucket_name}}</th>
          {% for storeid in bucket.values()[0]['stores']|sort|reverse %}
            {% if storeid %}
              <th colspan="3">{{storeid}}</th>
            {% else %}
              <th colspan="2">Vault</th>
            {% endif %}
          {% endfor %}
        </tr>
        {% for item_name, item in bucket.iteritems()|sort %}
          <tr>
            <td>{{item_name}}</td>
            {% for storeid, store in item['stores'].iteritems()|sort|reverse %}
              <td style="border-left: 1px solid #ddd">{% if store.count %}{{store.count}}{% endif %}</td>
              {% if storeid %}
                <td>
                  {% if item.equippable and store.count %}
                    <button class="btn btn-default" disabled>Equip</button>
                  {% endif %}
                </td>
              {% endif %}
              <td>
                {% if item.transferrable and item.total > store.count %}
                  <button class="btn btn-default" disabled>Move</button>
                {% endif %}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
